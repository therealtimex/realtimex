import{R as s,r as i,g as v,j as e,h as j,W as T,s as p,aW as q,k as w,p as R,M as y,b as H,i as z}from"../index.js";import{S as I}from"./index-af9073a4.js";import{S as W}from"./index-44bf2282.js";/* empty css                 */import{I as U}from"./index-0f62630d.js";import{E as b}from"./embed-ee08318b.js";import{a as B}from"./numbers-3998afe1.js";import{q as J}from"./index-4fb4d421.js";import{H as Q}from"./github-b9aaadce.js";import{C as G}from"./index-07eec889.js";import"./Globe-1f44e45d.js";import"./CaretRight-731d83f5.js";const K=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M51.51,104.49l-32-32a12,12,0,0,1,0-17l32-32a12,12,0,1,1,17,17L45,64,68.49,87.51a12,12,0,0,1-17,17Zm48,0a12,12,0,0,0,17,0l32-32a12,12,0,0,0,0-17l-32-32a12,12,0,1,0-17,17L123,64,99.51,87.51A12,12,0,0,0,99.51,104.49ZM200,36H180a12,12,0,0,0,0,24h16V196H60V140a12,12,0,0,0-24,0v60a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V56A20,20,0,0,0,200,36Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M152,32V96a16,16,0,0,1-16,16H32A16,16,0,0,1,16,96V32A16,16,0,0,1,32,16H136A16,16,0,0,1,152,32Z",opacity:"0.2"}),s.createElement("path",{d:"M58.34,101.66l-32-32a8,8,0,0,1,0-11.32l32-32A8,8,0,0,1,69.66,37.66L43.31,64,69.66,90.34a8,8,0,0,1-11.32,11.32Zm40,0a8,8,0,0,0,11.32,0l32-32a8,8,0,0,0,0-11.32l-32-32A8,8,0,0,0,98.34,37.66L124.69,64,98.34,90.34A8,8,0,0,0,98.34,101.66ZM200,40H176a8,8,0,0,0,0,16h24V200H56V136a8,8,0,0,0-16,0v64a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M200,40H168a16,16,0,0,0-16-16H32A16,16,0,0,0,16,40v80a16,16,0,0,0,16,16h8v64a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40ZM106.34,61.66a8,8,0,0,1,11.32-11.32l24,24a8,8,0,0,1,0,11.32l-24,24a8,8,0,0,1-11.32-11.32L124.69,80Zm-64,24a8,8,0,0,1,0-11.32l24-24A8,8,0,0,1,77.66,61.66L59.31,80,77.66,98.34a8,8,0,0,1-11.32,11.32ZM200,200H56V136h96a16,16,0,0,0,16-16V56h32Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M59.76,100.24l-32-32a6,6,0,0,1,0-8.48l32-32a6,6,0,1,1,8.48,8.48L40.49,64,68.24,91.76a6,6,0,1,1-8.48,8.48Zm40,0a6,6,0,0,0,8.48,0l32-32a6,6,0,0,0,0-8.48l-32-32a6,6,0,1,0-8.48,8.48L127.51,64,99.76,91.76A6,6,0,0,0,99.76,100.24ZM200,42H176a6,6,0,0,0,0,12h24a2,2,0,0,1,2,2V200a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V136a6,6,0,0,0-12,0v64a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V56A14,14,0,0,0,200,42Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M58.34,101.66l-32-32a8,8,0,0,1,0-11.32l32-32A8,8,0,0,1,69.66,37.66L43.31,64,69.66,90.34a8,8,0,0,1-11.32,11.32Zm40,0a8,8,0,0,0,11.32,0l32-32a8,8,0,0,0,0-11.32l-32-32A8,8,0,0,0,98.34,37.66L124.69,64,98.34,90.34A8,8,0,0,0,98.34,101.66ZM200,40H176a8,8,0,0,0,0,16h24V200H56V136a8,8,0,0,0-16,0v64a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M61.17,98.83l-32-32a4,4,0,0,1,0-5.66l32-32a4,4,0,0,1,5.66,5.66L37.66,64,66.83,93.17a4,4,0,0,1-5.66,5.66Zm40,0a4,4,0,0,0,5.66,0l32-32a4,4,0,0,0,0-5.66l-32-32a4,4,0,0,0-5.66,5.66L130.34,64,101.17,93.17A4,4,0,0,0,101.17,98.83ZM200,44H176a4,4,0,0,0,0,8h24a4,4,0,0,1,4,4V200a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V136a4,4,0,0,0-8,0v64a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V56A12,12,0,0,0,200,44Z"}))]]);var X=Object.defineProperty,Y=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,k=(a,t,r)=>t in a?X(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,re=(a,t)=>{for(var r in t||(t={}))te.call(t,r)&&k(a,r,t[r]);if(A)for(var r of A(t))ae.call(t,r)&&k(a,r,t[r]);return a},se=(a,t)=>Y(a,ee(t));const V=i.forwardRef((a,t)=>s.createElement(v,se(re({ref:t},a),{weights:K})));V.displayName="CodeBlock";const le=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M180,64H40A12,12,0,0,0,28,76V216a12,12,0,0,0,12,12H180a12,12,0,0,0,12-12V76A12,12,0,0,0,180,64ZM168,204H52V88H168ZM228,40V180a12,12,0,0,1-24,0V52H76a12,12,0,0,1,0-24H216A12,12,0,0,1,228,40Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M184,72V216H40V72Z",opacity:"0.2"}),s.createElement("path",{d:"M184,64H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H184a8,8,0,0,0,8-8V72A8,8,0,0,0,184,64Zm-8,144H48V80H176ZM224,40V184a8,8,0,0,1-16,0V48H72a8,8,0,0,1,0-16H216A8,8,0,0,1,224,40Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M192,72V216a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8H184A8,8,0,0,1,192,72Zm24-40H72a8,8,0,0,0,0,16H208V184a8,8,0,0,0,16,0V40A8,8,0,0,0,216,32Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M184,66H40a6,6,0,0,0-6,6V216a6,6,0,0,0,6,6H184a6,6,0,0,0,6-6V72A6,6,0,0,0,184,66Zm-6,144H46V78H178ZM222,40V184a6,6,0,0,1-12,0V46H72a6,6,0,0,1,0-12H216A6,6,0,0,1,222,40Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M184,64H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H184a8,8,0,0,0,8-8V72A8,8,0,0,0,184,64Zm-8,144H48V80H176ZM224,40V184a8,8,0,0,1-16,0V48H72a8,8,0,0,1,0-16H216A8,8,0,0,1,224,40Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M184,68H40a4,4,0,0,0-4,4V216a4,4,0,0,0,4,4H184a4,4,0,0,0,4-4V72A4,4,0,0,0,184,68Zm-4,144H44V76H180ZM220,40V184a4,4,0,0,1-8,0V44H72a4,4,0,0,1,0-8H216A4,4,0,0,1,220,40Z"}))]]);var oe=Object.defineProperty,ne=Object.defineProperties,ie=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,E=(a,t,r)=>t in a?oe(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,me=(a,t)=>{for(var r in t||(t={}))de.call(t,r)&&E(a,r,t[r]);if(M)for(var r of M(t))ce.call(t,r)&&E(a,r,t[r]);return a},he=(a,t)=>ne(a,ie(t));const S=i.forwardRef((a,t)=>s.createElement(v,he(me({ref:t},a),{weights:le})));S.displayName="CopySimple";const pe=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M128,96a32,32,0,1,0,32,32A32,32,0,0,0,128,96Zm0,40a8,8,0,1,1,8-8A8,8,0,0,1,128,136Zm80-40a32,32,0,1,0,32,32A32,32,0,0,0,208,96Zm0,40a8,8,0,1,1,8-8A8,8,0,0,1,208,136ZM48,96a32,32,0,1,0,32,32A32,32,0,0,0,48,96Zm0,40a8,8,0,1,1,8-8A8,8,0,0,1,48,136Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M152,128a24,24,0,1,1-24-24A24,24,0,0,1,152,128ZM48,104a24,24,0,1,0,24,24A24,24,0,0,0,48,104Zm160,0a24,24,0,1,0,24,24A24,24,0,0,0,208,104Z",opacity:"0.2"}),s.createElement("path",{d:"M128,96a32,32,0,1,0,32,32A32,32,0,0,0,128,96Zm0,48a16,16,0,1,1,16-16A16,16,0,0,1,128,144ZM48,96a32,32,0,1,0,32,32A32,32,0,0,0,48,96Zm0,48a16,16,0,1,1,16-16A16,16,0,0,1,48,144ZM208,96a32,32,0,1,0,32,32A32,32,0,0,0,208,96Zm0,48a16,16,0,1,1,16-16A16,16,0,0,1,208,144Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M156,128a28,28,0,1,1-28-28A28,28,0,0,1,156,128ZM48,100a28,28,0,1,0,28,28A28,28,0,0,0,48,100Zm160,0a28,28,0,1,0,28,28A28,28,0,0,0,208,100Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M128,98a30,30,0,1,0,30,30A30,30,0,0,0,128,98Zm0,48a18,18,0,1,1,18-18A18,18,0,0,1,128,146ZM48,98a30,30,0,1,0,30,30A30,30,0,0,0,48,98Zm0,48a18,18,0,1,1,18-18A18,18,0,0,1,48,146ZM208,98a30,30,0,1,0,30,30A30,30,0,0,0,208,98Zm0,48a18,18,0,1,1,18-18A18,18,0,0,1,208,146Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M128,96a32,32,0,1,0,32,32A32,32,0,0,0,128,96Zm0,48a16,16,0,1,1,16-16A16,16,0,0,1,128,144ZM48,96a32,32,0,1,0,32,32A32,32,0,0,0,48,96Zm0,48a16,16,0,1,1,16-16A16,16,0,0,1,48,144ZM208,96a32,32,0,1,0,32,32A32,32,0,0,0,208,96Zm0,48a16,16,0,1,1,16-16A16,16,0,0,1,208,144Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M128,100a28,28,0,1,0,28,28A28,28,0,0,0,128,100Zm0,48a20,20,0,1,1,20-20A20,20,0,0,1,128,148ZM48,100a28,28,0,1,0,28,28A28,28,0,0,0,48,100Zm0,48a20,20,0,1,1,20-20A20,20,0,0,1,48,148Zm160-48a28,28,0,1,0,28,28A28,28,0,0,0,208,100Zm0,48a20,20,0,1,1,20-20A20,20,0,0,1,208,148Z"}))]]);var ue=Object.defineProperty,xe=Object.defineProperties,be=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,_=(a,t,r)=>t in a?ue(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,we=(a,t)=>{for(var r in t||(t={}))fe.call(t,r)&&_(a,r,t[r]);if(Z)for(var r of Z(t))ge.call(t,r)&&_(a,r,t[r]);return a},ye=(a,t)=>xe(a,be(t));const O=i.forwardRef((a,t)=>s.createElement(v,ye(we({ref:t},a),{weights:pe})));O.displayName="DotsThreeOutline";function C(a){const t={};for(var[r,l]of a.entries())!l||l===null||(t[r]=l,l==="on"&&(t[r]=!0));return t.hasOwnProperty("allowlist_domains")||(t.allowlist_domains=null),t.hasOwnProperty("allow_model_override")||(t.allow_model_override=!1),t.hasOwnProperty("allow_temperature_override")||(t.allow_temperature_override=!1),t.hasOwnProperty("allow_prompt_override")||(t.allow_prompt_override=!1),t}function ve({closeModal:a}){const[t,r]=i.useState(null),l=async o=>{r(null),o.preventDefault();const n=new FormData(o.target),d=C(n),{embed:m,error:c}=await b.newEmbed(d);m&&window.location.reload(),r(c)};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-full max-w-2xl bg-theme-bg-secondary rounded-lg shadow border-2 border-theme-modal-border",children:[e.jsxs("div",{className:"relative p-6 border-b rounded-t border-theme-modal-border",children:[e.jsx("div",{className:"w-full flex gap-x-2 items-center",children:e.jsx("h3",{className:"text-xl font-semibold text-white overflow-hidden overflow-ellipsis whitespace-nowrap",children:"Create new embed for workspace"})}),e.jsx("button",{onClick:a,type:"button",className:"absolute top-4 right-4 transition-all duration-300 bg-transparent rounded-lg text-sm p-1 inline-flex items-center hover:bg-theme-modal-border hover:border-theme-modal-border hover:border-opacity-50 border-transparent border",children:e.jsx(j,{size:24,weight:"bold",className:"text-white"})})]}),e.jsx("div",{className:"px-7 py-6",children:e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto pr-2",children:[e.jsx(L,{}),e.jsx(F,{}),e.jsx($,{}),e.jsx(f,{name:"max_chats_per_day",title:"Max chats per day",hint:"Limit the amount of chats this embedded chat can process in a 24 hour period. Zero is unlimited."}),e.jsx(f,{name:"max_chats_per_session",title:"Max chats per session",hint:"Limit the amount of chats a session user can send with this embed in a 24 hour period. Zero is unlimited."}),e.jsx(u,{name:"allow_model_override",title:"Enable dynamic model use",hint:"Allow setting of the preferred LLM model to override the workspace default."}),e.jsx(u,{name:"allow_temperature_override",title:"Enable dynamic LLM temperature",hint:"Allow setting of the LLM temperature to override the workspace default."}),e.jsx(u,{name:"allow_prompt_override",title:"Enable Prompt Override",hint:"Allow setting of the system prompt to override the workspace default."}),t&&e.jsxs("p",{className:"text-red-400 text-sm",children:["Error: ",t]}),e.jsxs("p",{className:"text-white text-opacity-60 text-xs md:text-sm",children:["After creating an embed you will be provided a link that you can publish on your website with a simple",e.jsx("code",{className:"light:bg-stone-300 bg-stone-900 text-white mx-1 px-1 rounded-sm",children:"<script>"})," ","tag."]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-6 border-t border-theme-modal-border",children:[e.jsx("button",{onClick:a,type:"button",className:"transition-all duration-300 text-white hover:bg-zinc-700 px-4 py-2 rounded-lg text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"transition-all duration-300 bg-white text-black hover:opacity-60 px-4 py-2 rounded-lg text-sm",children:"Create embed"})]})]})})]})})}const L=({defaultValue:a=null})=>{const[t,r]=i.useState([]);return i.useEffect(()=>{async function l(){const o=await T.all();r(o)}l()},[]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col mb-2",children:[e.jsx("label",{htmlFor:"workspace_id",className:"block  text-sm font-medium text-white",children:"Workspace"}),e.jsx("p",{className:"text-theme-text-secondary text-xs",children:"This is the workspace your chat window will be based on. All defaults will be inherited from the workspace unless overridden by this config."})]}),e.jsx("select",{name:"workspace_id",required:!0,defaultValue:a,className:"min-w-[15rem] rounded-lg bg-theme-settings-input-bg px-4 py-2 text-sm text-white focus:ring-blue-500 focus:border-blue-500",children:t.map(l=>e.jsx("option",{selected:a===l.id,value:l.id,children:l.name}))})]})},F=({defaultValue:a=null})=>{const[t,r]=i.useState(a!=null?a:"query");return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white",htmlFor:"chat_mode",children:"Allowed chat method"}),e.jsxs("p",{className:"text-theme-text-secondary text-xs",children:["Set how your chatbot should operate. Query means it will only respond if a document helps answer the query.",e.jsx("br",{}),"Chat opens the chat to even general questions and can answer totally unrelated queries to your workspace."]})]}),e.jsxs("div",{className:"mt-2 gap-y-3 flex flex-col",children:[e.jsxs("label",{className:`transition-all duration-300 w-full h-11 p-2.5 rounded-lg flex justify-start items-center gap-2.5 cursor-pointer border ${t==="chat"?"border-theme-sidebar-item-workspace-active bg-theme-bg-secondary":"border-theme-sidebar-border hover:border-theme-sidebar-border hover:bg-theme-bg-secondary"} `,children:[e.jsx("input",{type:"radio",name:"chat_mode",value:"chat",checked:t==="chat",onChange:l=>r(l.target.value),className:"hidden"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-theme-sidebar-border mr-2 ${t==="chat"?"bg-[var(--theme-sidebar-item-workspace-active)]":""}`}),e.jsx("div",{className:"text-theme-text-primary text-sm font-medium font-['Plus Jakarta Sans'] leading-tight",children:"Chat: Respond to all questions regardless of context"})]}),e.jsxs("label",{className:`transition-all duration-300 w-full h-11 p-2.5 rounded-lg flex justify-start items-center gap-2.5 cursor-pointer border ${t==="query"?"border-theme-sidebar-item-workspace-active bg-theme-bg-secondary":"border-theme-sidebar-border hover:border-theme-sidebar-border hover:bg-theme-bg-secondary"} `,children:[e.jsx("input",{type:"radio",name:"chat_mode",value:"query",checked:t==="query",onChange:l=>r(l.target.value),className:"hidden"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-theme-sidebar-border mr-2 ${t==="query"?"bg-[var(--theme-sidebar-item-workspace-active)]":""}`}),e.jsx("div",{className:"text-theme-text-primary text-sm font-medium font-['Plus Jakarta Sans'] leading-tight",children:"Query: Only respond to chats related to documents in workspace"})]})]})]})},$=({defaultValue:a=[]})=>{const[t,r]=i.useState(a),l=n=>{const d=n.map(m=>{let c=m;!c.includes("http://")&&!c.includes("https://")&&(c=`https://${c}`);try{return new URL(c),c}catch{return null}}).filter(m=>!!m);r(d)},o=n=>{const d=n.target.value;if(!d)return;const m=[...t,d].map(c=>{let h=c;!h.includes("http://")&&!h.includes("https://")&&(h=`https://${h}`);try{return new URL(h),h}catch{return null}});n.target.value="",r(m)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col mb-2",children:[e.jsx("label",{htmlFor:"allowlist_domains",className:"block text-sm font-medium text-white",children:"Restrict requests from domains"}),e.jsxs("p",{className:"text-theme-text-secondary text-xs",children:["This filter will block any requests that come from a domain other than the list below.",e.jsx("br",{}),"Leaving this empty means anyone can use your embed on any site."]})]}),e.jsx("input",{type:"hidden",name:"allowlist_domains",value:t.join(",")}),e.jsx(J,{value:t,onChange:l,onBlur:o,placeholder:"https://mysite.com, https://anythingllm.com",classNames:{tag:"bg-theme-settings-input-bg light:bg-black/10 bg-blue-300/10 text-zinc-800",input:"flex p-1 !bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none"}})]})},f=({name:a,title:t,hint:r,defaultValue:l=0})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col mb-2",children:[e.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-white",children:t}),e.jsx("p",{className:"text-theme-text-secondary text-xs",children:r})]}),e.jsx("input",{type:"number",name:a,className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-[15rem] p-2.5",min:0,defaultValue:l,onScroll:o=>o.target.blur()})]}),u=({name:a,title:t,hint:r,defaultValue:l=null})=>{const[o,n]=i.useState(l!=null?l:!1);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col mb-2",children:[e.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-white",children:t}),e.jsx("p",{className:"text-theme-text-secondary text-xs",children:r})]}),e.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[e.jsx("input",{name:a,type:"checkbox",onClick:()=>n(!o),checked:o,className:"peer sr-only pointer-events-none"}),e.jsx("div",{className:"peer-disabled:opacity-50 pointer-events-none peer h-6 w-11 rounded-full bg-[#CFCFD0] after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:shadow-xl after:border-none after:bg-white after:box-shadow-md after:transition-all after:content-[''] peer-checked:bg-[#32D583] peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-transparent"})]})]})};function je({embed:a,closeModal:t}){const[r,l]=i.useState(null),o=async n=>{l(null),n.preventDefault();const d=new FormData(n.target),m=C(d),{success:c,error:h}=await b.updateEmbed(a.id,m);c&&(p("Embed updated successfully.","success",{clear:!0}),setTimeout(()=>{window.location.reload()},800)),l(h)};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-full max-w-2xl bg-theme-bg-secondary rounded-lg shadow border-2 border-theme-modal-border",children:[e.jsxs("div",{className:"relative p-6 border-b rounded-t border-theme-modal-border",children:[e.jsx("div",{className:"w-full flex gap-x-2 items-center",children:e.jsxs("h3",{className:"text-xl font-semibold text-white overflow-hidden overflow-ellipsis whitespace-nowrap",children:["Update embed #",a.id]})}),e.jsx("button",{onClick:t,type:"button",className:"absolute top-4 right-4 transition-all duration-300 bg-transparent rounded-lg text-sm p-1 inline-flex items-center hover:bg-theme-modal-border hover:border-theme-modal-border hover:border-opacity-50 border-transparent border",children:e.jsx(j,{size:24,weight:"bold",className:"text-white"})})]}),e.jsx("div",{className:"px-7 py-6",children:e.jsxs("form",{onSubmit:o,children:[e.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto pr-2",children:[e.jsx(L,{defaultValue:a.workspace.id}),e.jsx(F,{defaultValue:a.chat_mode}),e.jsx($,{defaultValue:a.allowlist_domains?JSON.parse(a.allowlist_domains):[]}),e.jsx(f,{name:"max_chats_per_day",title:"Max chats per day",hint:"Limit the amount of chats this embedded chat can process in a 24 hour period. Zero is unlimited.",defaultValue:a.max_chats_per_day}),e.jsx(f,{name:"max_chats_per_session",title:"Max chats per session",hint:"Limit the amount of chats a session user can send with this embed in a 24 hour period. Zero is unlimited.",defaultValue:a.max_chats_per_session}),e.jsx(u,{name:"allow_model_override",title:"Enable dynamic model use",hint:"Allow setting of the preferred LLM model to override the workspace default.",defaultValue:a.allow_model_override}),e.jsx(u,{name:"allow_temperature_override",title:"Enable dynamic LLM temperature",hint:"Allow setting of the LLM temperature to override the workspace default.",defaultValue:a.allow_temperature_override}),e.jsx(u,{name:"allow_prompt_override",title:"Enable Prompt Override",hint:"Allow setting of the system prompt to override the workspace default.",defaultValue:a.allow_prompt_override}),r&&e.jsxs("p",{className:"text-red-400 text-sm",children:["Error: ",r]}),e.jsxs("p",{className:"text-white text-opacity-60 text-xs md:text-sm",children:["After creating an embed you will be provided a link that you can publish on your website with a simple",e.jsx("code",{className:"border-none bg-theme-settings-input-bg text-white mx-1 px-1 rounded-sm",children:"<script>"})," ","tag."]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-6 border-t border-theme-modal-border",children:[e.jsx("button",{onClick:t,type:"button",className:"transition-all duration-300 text-white hover:bg-zinc-700 px-4 py-2 rounded-lg text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"transition-all duration-300 bg-white text-black hover:opacity-60 px-4 py-2 rounded-lg text-sm",children:"Update embed"})]})]})})]})})}function Ne({embed:a,closeModal:t}){return e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-full max-w-2xl bg-theme-bg-secondary rounded-lg shadow border-2 border-theme-modal-border",children:[e.jsxs("div",{className:"relative p-6 border-b rounded-t border-theme-modal-border",children:[e.jsx("div",{className:"w-full flex gap-x-2 items-center",children:e.jsx("h3",{className:"text-xl font-semibold text-white overflow-hidden overflow-ellipsis whitespace-nowrap",children:"Copy your embed code"})}),e.jsx("button",{onClick:t,type:"button",className:"absolute top-4 right-4 transition-all duration-300 bg-transparent rounded-lg text-sm p-1 inline-flex items-center hover:bg-theme-modal-border hover:border-theme-modal-border hover:border-opacity-50 border-transparent border",children:e.jsx(j,{size:24,weight:"bold",className:"text-white"})})]}),e.jsxs("div",{className:"px-7 py-6",children:[e.jsx("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto pr-2",children:e.jsx(ke,{embed:a})}),e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-6 border-t border-theme-modal-border",children:[e.jsx("button",{onClick:t,type:"button",className:"transition-all duration-300 text-white hover:bg-zinc-700 px-4 py-2 rounded-lg text-sm",children:"Close"}),e.jsx("div",{hidden:!0})]})]})]})})}function Ae(a,t,r){return`<!--
Paste this script at the bottom of your HTML before the </body> tag.
See more style and config options on our docs
https://github.com/Mintplex-Labs/anything-llm/tree/master/embed/README.md
-->
<script
  data-embed-id="${a.uuid}"
  data-base-api-url="${r}/api/embed"
  src="${t}/embed/anythingllm-chat-widget.min.js">
<\/script>
<!-- AnythingLLM (https://anythingllm.com) -->
`}const ke=({embed:a})=>{const[t,r]=i.useState(!1),l=window.location.origin,o=window.location.origin,n=Ae(a,l,o),d=window.localStorage.getItem("theme")==="light"?"github":"github-dark",m=()=>{window.navigator.clipboard.writeText(n),r(!0),setTimeout(()=>{r(!1)},2500),p("Snippet copied to clipboard!","success",{clear:!0})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"HTML Script Tag Embed Code"}),e.jsx("p",{className:"text-theme-text-secondary text-xs",children:"Have your workspace chat embed function like a help desk chat bottom in the corner of your website."}),e.jsx("a",{href:"https://github.com/Mintplex-Labs/anything-llm/tree/master/embed/README.md",target:"_blank",className:"text-blue-300 light:text-blue-500 hover:underline",children:"View all style and configuration options →"})]}),e.jsxs("button",{disabled:t,onClick:m,className:`disabled:border disabled:border-green-300 disabled:light:border-green-600 border border-transparent relative w-full font-mono flex hljs ${d} light:border light:border-gray-700 text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none p-2.5`,children:[e.jsx("div",{className:"flex w-full text-left flex-col gap-y-1 pr-6 pl-4 whitespace-pre-line",dangerouslySetInnerHTML:{__html:Q.highlight(n,{language:"html",ignoreIllegals:!0}).value}}),t?e.jsx(q,{size:14,className:"text-green-300 light:text-green-600 absolute top-2 right-2"}):e.jsx(S,{size:14,className:"absolute top-2 right-2"})]})]})};function Me({embed:a}){const t=i.useRef(null),[r,l]=i.useState(Number(a.enabled)===1),{isOpen:o,openModal:n,closeModal:d}=w(),{isOpen:m,openModal:c,closeModal:h}=w(),P=async()=>{if(!window.confirm(`Are you sure you want to disabled this embed?
Once disabled the embed will no longer respond to any chat requests.`))return!1;const{success:x,error:g}=await b.updateEmbed(a.id,{enabled:!r});x||p(g,"error",{clear:!0}),x&&(p(`Embed ${r?"has been disabled":"is active"}.`,"success",{clear:!0}),l(!r))},D=async()=>{var N;if(!window.confirm(`Are you sure you want to delete this embed?
Once deleted this embed will no longer respond to chats or be active.

This action is irreversible.`))return!1;const{success:x,error:g}=await b.deleteEmbed(a.id);x||p(g,"error",{clear:!0}),x&&((N=t==null?void 0:t.current)==null||N.remove(),p("Embed deleted from system.","success",{clear:!0}))};return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{ref:t,className:"bg-transparent text-white text-opacity-80 text-sm",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap flex item-center gap-x-1",children:e.jsxs("a",{href:R.workspace.chat(a.workspace.slug),target:"_blank",rel:"noreferrer",className:"text-white flex items-center hover:underline",children:[e.jsx(U,{className:"mr-2 w-5 h-5"})," ",a.workspace.name]})}),e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap",children:B(a._count.embed_chats)}),e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ee,{domainList:a.allowlist_domains})}),e.jsxs("td",{className:"px-6 py-4 flex items-center gap-x-6",children:[e.jsx("button",{onClick:n,className:"font-medium text-white text-opacity-80 rounded-lg hover:text-white hover:light:text-gray-500 px-2 py-1 hover:text-opacity-60 hover:bg-white hover:bg-opacity-10",children:e.jsx(O,{weight:"fill",className:"h-5 w-5"})}),e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:c,className:"font-medium text-blue-600 dark:text-blue-300 px-2 py-1 rounded-lg hover:bg-blue-50 hover:dark:bg-blue-800 hover:dark:bg-opacity-20",children:"Show Code"}),e.jsx("button",{onClick:P,className:"font-medium text-orange-600 dark:text-orange-300 px-2 py-1 rounded-lg hover:bg-orange-50 hover:dark:bg-orange-800 hover:dark:bg-opacity-20",children:r?"Disable":"Enable"}),e.jsx("button",{onClick:D,className:"font-medium text-red-600 dark:text-red-300 px-2 py-1 rounded-lg hover:bg-red-50 hover:dark:bg-red-800 hover:dark:bg-opacity-20",children:"Delete"})]})]})]}),e.jsx(y,{isOpen:o,children:e.jsx(je,{embed:a,closeModal:d})}),e.jsx(y,{isOpen:m,children:e.jsx(Ne,{embed:a,closeModal:h})})]})}function Ee({domainList:a}){if(!a)return e.jsx("p",{children:"all"});try{const t=JSON.parse(a);return e.jsx("div",{className:"flex flex-col gap-y-2",children:t.map(r=>e.jsx("p",{className:"font-mono !font-normal",children:r}))})}catch{return e.jsx("p",{children:"all"})}}function qe(){const{isOpen:a,openModal:t,closeModal:r}=w(),{t:l}=H();return e.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-theme-bg-container flex",children:[e.jsx(I,{}),e.jsxs("div",{style:{height:z?"100%":"calc(100% - 32px)"},className:"relative md:ml-[2px] md:mr-[16px] md:my-[16px] md:rounded-[16px] bg-theme-bg-secondary w-full h-full overflow-y-scroll p-4 md:p-0",children:[e.jsxs("div",{className:"flex flex-col w-full px-1 md:pl-6 md:pr-[50px] md:py-6 py-16",children:[e.jsxs("div",{className:"w-full flex flex-col gap-y-1 pb-6 border-white/10 border-b-2",children:[e.jsx("div",{className:"items-center flex gap-x-4",children:e.jsx("p",{className:"text-lg leading-6 font-bold text-theme-text-primary",children:l("embeddable.title")})}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-theme-text-secondary mt-2",children:l("embeddable.description")})]}),e.jsx("div",{className:"w-full justify-end flex",children:e.jsxs(G,{onClick:t,className:"mt-3 mr-0 mb-4 md:-mb-14 z-10",children:[e.jsx(V,{className:"h-4 w-4",weight:"bold"})," ",l("embeddable.create")]})}),e.jsx("div",{className:"overflow-x-auto mt-6",children:e.jsx(Ze,{})})]}),e.jsx(y,{isOpen:a,children:e.jsx(ve,{closeModal:r})})]})]})}function Ze(){const[a,t]=i.useState(!0),[r,l]=i.useState([]),{t:o}=H();return i.useEffect(()=>{async function n(){const d=await b.embeds();l(d),t(!1)}n()},[]),a?e.jsx(W,{height:"80vh",width:"100%",highlightColor:"var(--theme-bg-primary)",baseColor:"var(--theme-bg-secondary)",count:1,className:"w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm",containerClassName:"flex w-full"}):e.jsxs("table",{className:"w-full text-sm text-left rounded-lg min-w-[640px] border-spacing-0",children:[e.jsx("thead",{className:"text-theme-text-secondary text-xs leading-[18px] font-bold uppercase border-white/10 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 rounded-tl-lg",children:o("embeddable.table.workspace")}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:o("embeddable.table.chats")}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:o("embeddable.table.Active")}),e.jsx("th",{scope:"col",className:"px-6 py-3 rounded-tr-lg",children:" "})]})}),e.jsx("tbody",{children:r.map(n=>e.jsx(Me,{embed:n},n.id))})]})}export{qe as default};
