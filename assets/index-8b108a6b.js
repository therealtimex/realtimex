import{b as V,j as e,r as o,k as W,a3 as Z,a4 as H,a5 as R,a6 as F,a7 as $,a8 as G,a9 as U,aa as X,i as A,G as Y,w as J,h as _,M as ee,S as D,s as B}from"../index.js";import{S as le}from"./index-af9073a4.js";import{C as te}from"./index-488638a6.js";import{D as ae}from"./CaretUpDown-676a7767.js";import{C as oe}from"./index-07eec889.js";import"./Globe-1f44e45d.js";import"./index-0f62630d.js";import"./CaretRight-731d83f5.js";import"./Warning-8bf71f60.js";function se(){const{t:l}=V();return e.jsx("div",{className:"w-full h-10 items-center flex",children:e.jsx("p",{className:"text-sm font-base text-white text-opacity-60",children:l("vector.provider.description")})})}function ne({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-7",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Chroma Endpoint"}),e.jsx("input",{type:"url",name:"ChromaEndpoint",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"http://localhost:8000",defaultValue:l==null?void 0:l.ChromaEndpoint,required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Header"}),e.jsx("input",{name:"ChromaApiHeader",autoComplete:"off",type:"text",defaultValue:l==null?void 0:l.ChromaApiHeader,className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"X-Api-Key"})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Key"}),e.jsx("input",{name:"ChromaApiKey",autoComplete:"off",type:"password",defaultValue:l!=null&&l.ChromaApiKey?"*".repeat(20):"",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"sk-myApiKeyToAccessMyChromaInstance"})]})]})})}function re({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-7",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Pinecone DB API Key"}),e.jsx("input",{type:"password",name:"PineConeKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Pinecone API Key",defaultValue:l!=null&&l.PineConeKey?"*".repeat(20):"",required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Pinecone Index Name"}),e.jsx("input",{type:"text",name:"PineConeIndex",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"my-index",defaultValue:l==null?void 0:l.PineConeIndex,required:!0,autoComplete:"off",spellCheck:!1})]})]})})}function ie({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-7",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"QDrant API Endpoint"}),e.jsx("input",{type:"url",name:"QdrantEndpoint",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"http://localhost:6633",defaultValue:l==null?void 0:l.QdrantEndpoint,required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Key"}),e.jsx("input",{type:"password",name:"QdrantApiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"wOeqxsYP4....1244sba",defaultValue:l==null?void 0:l.QdrantApiKey,autoComplete:"off",spellCheck:!1})]})]})})}function ce({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-7",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Weaviate Endpoint"}),e.jsx("input",{type:"url",name:"WeaviateEndpoint",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"http://localhost:8080",defaultValue:l==null?void 0:l.WeaviateEndpoint,required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Key"}),e.jsx("input",{type:"password",name:"WeaviateApiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"sk-123Abcweaviate",defaultValue:l==null?void 0:l.WeaviateApiKey,autoComplete:"off",spellCheck:!1})]})]})})}function de({name:l,value:i,image:d,description:r,checked:m,onClick:x}){return e.jsxs("div",{onClick:()=>x(i),className:`w-full p-2 rounded-md hover:cursor-pointer hover:bg-theme-bg-secondary ${m?"bg-theme-bg-secondary":""}`,children:[e.jsx("input",{type:"checkbox",value:i,className:"peer hidden",checked:m,readOnly:!0,formNoValidate:!0}),e.jsxs("div",{className:"flex gap-x-4 items-center",children:[e.jsx("img",{src:d,alt:`${l} logo`,className:"w-10 h-10 rounded-md"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:l}),e.jsx("div",{className:"mt-1 text-xs text-description",children:r})]})]})]})}function me({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-7",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Milvus DB Address"}),e.jsx("input",{type:"text",name:"MilvusAddress",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"http://localhost:19530",defaultValue:l==null?void 0:l.MilvusAddress,required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Milvus Username"}),e.jsx("input",{type:"text",name:"MilvusUsername",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"username",defaultValue:l==null?void 0:l.MilvusUsername,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Milvus Password"}),e.jsx("input",{type:"password",name:"MilvusPassword",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"password",defaultValue:l!=null&&l.MilvusPassword?"*".repeat(20):"",autoComplete:"off",spellCheck:!1})]})]})})}function ue({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-4",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Cluster Endpoint"}),e.jsx("input",{type:"text",name:"ZillizEndpoint",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"https://sample.api.gcp-us-west1.zillizcloud.com",defaultValue:l==null?void 0:l.ZillizEndpoint,required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Token"}),e.jsx("input",{type:"password",name:"ZillizApiToken",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Zilliz cluster API Token",defaultValue:l!=null&&l.ZillizApiToken?"*".repeat(20):"",autoComplete:"off",spellCheck:!1})]})]})})}function pe({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-7",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Astra DB Endpoint"}),e.jsx("input",{type:"url",name:"AstraDBEndpoint",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Astra DB API endpoint",defaultValue:l==null?void 0:l.AstraDBEndpoint,required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Astra DB Application Token"}),e.jsx("input",{type:"password",name:"AstraDBApplicationToken",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"AstraCS:...",defaultValue:l!=null&&l.AstraDBApplicationToken?"*".repeat(20):"",required:!0,autoComplete:"off",spellCheck:!1})]})]})})}function Ne(){var C;const[l,i]=o.useState(!1),[d,r]=o.useState(!1),[m,x]=o.useState(!1),[s,S]=o.useState({}),[E,P]=o.useState(!0),[h,f]=o.useState(""),[M,z]=o.useState([]),[n,y]=o.useState(null),[b,u]=o.useState(!1),w=o.useRef(null),{isOpen:O,openModal:I,closeModal:j}=W(),{t:c}=V(),g=async t=>{t.preventDefault(),n!==(s==null?void 0:s.VectorDB)&&d&&m?I():await N()},N=async()=>{i(!0);const t=document.getElementById("vectordb-form"),a={},T=new FormData(t);a.VectorDB=n;for(var[q,Q]of T.entries())a[q]=Q;const{error:k}=await D.updateSystem(a);k?(B(`Failed to save vector database settings: ${k}`,"error"),r(!0)):(B("Vector database preferences saved successfully.","success"),r(!1)),i(!1),j()},K=t=>{f(""),y(t),u(!1),r(!0)},L=()=>{h.length>0?(f(""),w.current&&(w.current.value="")):u(!b)};o.useEffect(()=>{async function t(){const a=await D.keys();S(a),y((a==null?void 0:a.VectorDB)||"lancedb"),x((a==null?void 0:a.HasExistingEmbeddings)||!1),P(!1)}t()},[]),o.useEffect(()=>{const t=v.filter(a=>a.name.toLowerCase().includes(h.toLowerCase()));z(t)},[h,n]);const v=[{name:"LanceDB",value:"lancedb",logo:Z,options:e.jsx(se,{}),description:"100% local vector DB that runs on the same instance as AnythingLLM."},{name:"Chroma",value:"chroma",logo:H,options:e.jsx(ne,{settings:s}),description:"Open source vector database you can host yourself or on the cloud."},{name:"Pinecone",value:"pinecone",logo:R,options:e.jsx(re,{settings:s}),description:"100% cloud-based vector database for enterprise use cases."},{name:"Zilliz Cloud",value:"zilliz",logo:F,options:e.jsx(ue,{settings:s}),description:"Cloud hosted vector database built for enterprise with SOC 2 compliance."},{name:"QDrant",value:"qdrant",logo:$,options:e.jsx(ie,{settings:s}),description:"Open source local and distributed cloud vector database."},{name:"Weaviate",value:"weaviate",logo:G,options:e.jsx(ce,{settings:s}),description:"Open source local and cloud hosted multi-modal vector database."},{name:"Milvus",value:"milvus",logo:U,options:e.jsx(me,{settings:s}),description:"Open-source, highly scalable, and blazing fast."},{name:"AstraDB",value:"astra",logo:X,options:e.jsx(pe,{settings:s}),description:"Vector Search for Real-world GenAI."}],p=v.find(t=>t.value===n);return e.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-theme-bg-container flex",children:[e.jsx(le,{}),E?e.jsx("div",{style:{height:A?"100%":"calc(100% - 32px)"},className:"relative md:ml-[2px] md:mr-[16px] md:my-[16px] md:rounded-[16px] bg-theme-bg-secondary w-full h-full overflow-y-scroll p-4 md:p-0",children:e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx(Y,{})})}):e.jsx("div",{style:{height:A?"100%":"calc(100% - 32px)"},className:"relative md:ml-[2px] md:mr-[16px] md:my-[16px] md:rounded-[16px] bg-theme-bg-secondary w-full h-full overflow-y-scroll p-4 md:p-0",children:e.jsx("form",{id:"vectordb-form",onSubmit:g,className:"flex w-full",children:e.jsxs("div",{className:"flex flex-col w-full px-1 md:pl-6 md:pr-[50px] py-16 md:py-6",children:[e.jsxs("div",{className:"w-full flex flex-col gap-y-1 pb-6 border-white light:border-theme-sidebar-border border-b-2 border-opacity-10",children:[e.jsx("div",{className:"flex gap-x-4 items-center",children:e.jsx("p",{className:"text-lg leading-6 font-bold text-white",children:c("vector.title")})}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60",children:c("vector.description")})]}),e.jsx("div",{className:"w-full justify-end flex",children:d&&e.jsx(oe,{onClick:()=>g(),className:"mt-3 mr-0 -mb-14 z-10",children:c(l?"common.saving":"common.save")})}),e.jsx("div",{className:"text-base font-bold text-white mt-6 mb-4",children:c("vector.provider.title")}),e.jsxs("div",{className:"relative",children:[b&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-70 backdrop-blur-sm z-10",onClick:()=>u(!1)}),b?e.jsx("div",{className:"absolute top-0 left-0 w-full max-w-[640px] max-h-[310px] overflow-auto white-scrollbar min-h-[64px] bg-theme-settings-input-bg rounded-lg flex flex-col justify-between cursor-pointer border-2 border-primary-button z-20",children:e.jsxs("div",{className:"w-full flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex items-center sticky top-0 border-b border-[#9CA3AF] mx-4 bg-theme-settings-input-bg",children:[e.jsx(J,{size:20,weight:"bold",className:"absolute left-4 z-30 text-theme-text-primary -ml-4 my-2"}),e.jsx("input",{type:"text",name:"vdb-search",autoComplete:"off",placeholder:"Search all vector database providers",className:"border-none -ml-4 my-2 bg-transparent z-20 pl-12 h-[38px] w-full px-4 py-1 text-sm outline-none text-theme-text-primary placeholder:text-theme-text-primary placeholder:font-medium",onChange:t=>f(t.target.value),ref:w,onKeyDown:t=>{t.key==="Enter"&&t.preventDefault()}}),e.jsx(_,{size:20,weight:"bold",className:"cursor-pointer text-white hover:text-x-button",onClick:L})]}),e.jsx("div",{className:"flex-1 pl-4 pr-2 flex flex-col gap-y-1 overflow-y-auto white-scrollbar pb-4",children:M.map(t=>e.jsx(de,{name:t.name,value:t.value,image:t.logo,description:t.description,checked:n===t.value,onClick:()=>K(t.value)},t.name))})]})}):e.jsxs("button",{className:"w-full max-w-[640px] h-[64px] bg-theme-settings-input-bg rounded-lg flex items-center p-[14px] justify-between cursor-pointer border-2 border-transparent hover:border-primary-button transition-all duration-300",type:"button",onClick:()=>u(!0),children:[e.jsxs("div",{className:"flex gap-x-4 items-center",children:[e.jsx("img",{src:p.logo,alt:`${p.name} logo`,className:"w-10 h-10 rounded-md"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:p.name}),e.jsx("div",{className:"mt-1 text-xs text-description",children:p.description})]})]}),e.jsx(ae,{size:24,weight:"bold",className:"text-white"})]})]}),e.jsx("div",{onChange:()=>r(!0),className:"mt-4 flex flex-col gap-y-1",children:n&&((C=v.find(t=>t.value===n))==null?void 0:C.options)})]})})}),e.jsx(ee,{isOpen:O,children:e.jsx(te,{warningText:"Switching the vector database will reset all previously embedded documents in all workspaces.\\n\\nConfirming will clear all embeddings from your vector database and remove all documents from your workspaces. Your uploaded documents will not be deleted, they will be available for re-embedding.",onClose:j,onConfirm:N})})]})}export{Ne as default};
