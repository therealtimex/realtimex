import{r as d,j as e,p as g,F as v,i as w,b0 as N,s as h}from"../index.js";import{S as C}from"./index-af9073a4.js";import{C as f}from"./communityHub-8cb5710c.js";import{C as L}from"./index-ab9a9c60.js";import{a as A,r as p,b}from"./index-6bfcd7dc.js";import"./Globe-1f44e45d.js";import"./index-0f62630d.js";import"./CaretRight-731d83f5.js";import"./Warning-8bf71f60.js";import"./pluralize-b09498b3.js";import"./index-44bf2282.js";/* empty css                 */const H={createdByMe:{agentSkills:{items:[]},systemPrompts:{items:[]},slashCommands:{items:[]}},teamItems:[]};function I({connectionKey:i}){const[a,c]=d.useState(!0),[n,o]=d.useState(H);return d.useEffect(()=>{(async()=>{if(console.log("fetching user items",i),!!i){c(!0);try{const{success:s,createdByMe:t,teamItems:r}=await f.fetchUserItems();s&&o({createdByMe:t,teamItems:r})}catch(s){console.error("Error fetching user items:",s)}finally{c(!1)}}})()},[i]),{loading:a,userItems:n}}function M({connectionKey:i}){const{loading:a,userItems:c}=I({connectionKey:i}),{createdByMe:n={},teamItems:o=[]}=c||{};if(a)return e.jsx(A,{});const l=s=>Object.values(s).some(t=>{var r;return((r=t==null?void 0:t.items)==null?void 0:r.length)>0});return e.jsxs("div",{className:"flex flex-col gap-y-8",children:[e.jsxs("div",{className:"w-full flex flex-col gap-y-1 pb-6 border-white border-b-2 border-opacity-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-lg leading-6 font-bold text-white",children:"Created by me"}),e.jsx("a",{href:g.communityHub.noPrivateItems(),target:"_blank",rel:"noreferrer",className:"text-primary-button hover:text-primary-button/80 text-sm",children:"Why can't I see my private items?"})]}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60",children:"Items you have created and shared publicly on the AnythingLLM Community Hub."}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[Object.keys(n).map(s=>{var t,r;return(r=(t=n[s])==null?void 0:t.items)!=null&&r.length?e.jsxs("div",{className:"rounded-lg w-full",children:[e.jsx("h3",{className:"text-white capitalize font-medium mb-3",children:p(s)}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2",children:n[s].items.map(u=>e.jsx(b,{type:s,item:u},u.id))})]},s):null}),!l(n)&&e.jsx("p",{className:"text-white/60 text-xs text-center mt-4",children:"You haven't created any items yet."})]})]}),e.jsxs("div",{className:"w-full flex flex-col gap-y-1 pb-6 border-white border-b-2 border-opacity-10",children:[e.jsx("div",{className:"items-center",children:e.jsx("p",{className:"text-lg leading-6 font-bold text-white",children:"Items by team"})}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60",children:"Public and private items shared with teams you belong to."}),e.jsx("div",{className:"flex flex-col gap-4 mt-4",children:o.map(s=>e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx("h3",{className:"text-white text-sm font-medium",children:s.teamName}),Object.keys(s.items).map(t=>{var r,u;return(u=(r=s.items[t])==null?void 0:r.items)!=null&&u.length?e.jsxs("div",{className:"rounded-lg w-full",children:[e.jsx("h3",{className:"text-white capitalize font-medium mb-3",children:p(t)}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2",children:s.items[t].items.map(y=>e.jsx(b,{type:t,item:y},y.id))})]},t):null}),!l(s.items)&&e.jsx("p",{className:"text-white/60 text-xs text-center mt-4",children:"No items shared with this team yet."})]},s.teamId))})]})]})}function S(){const[i,a]=d.useState(""),[c,n]=d.useState(!1),[o,l]=d.useState(""),[s,t]=d.useState(!0);async function r(){l(i),n(!1)}async function u(m){const x=m.target.value;l(x),n(!0)}async function y(){if(o!==i){t(!0);try{if(!(await f.updateSettings({hub_api_key:o})).success)return h("Failed to save API key","error");n(!1),h("API key saved successfully","success"),a(o)}catch(m){console.error(m),h("Failed to save API key","error")}finally{t(!1)}}}async function j(){t(!0);try{if(!(await f.updateSettings({hub_api_key:""})).success)return h("Failed to disconnect from hub","error");n(!1),h("Disconnected from AnythingLLM Community Hub","success"),a(""),l("")}catch(m){console.error(m),h("Failed to disconnect from hub","error")}finally{t(!1)}}return d.useEffect(()=>{(async()=>{t(!0);try{const{connectionKey:x}=await f.getSettings();a(x||""),l(x||"")}catch(x){console.error("Error fetching data:",x)}finally{t(!1)}})()},[]),{connectionKey:o,originalConnectionKey:i,loading:s,onConnectionKeyChange:u,updateConnectionKey:y,hasChanges:c,resetChanges:r,disconnectHub:j}}function z(){const{connectionKey:i,originalConnectionKey:a,loading:c,onConnectionKeyChange:n,updateConnectionKey:o,hasChanges:l,resetChanges:s,disconnectHub:t}=S();return c?e.jsx(v,{}):e.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-theme-bg-container flex",children:[e.jsx(C,{}),e.jsx(L,{showing:l,onSave:o,onCancel:s}),e.jsx("div",{style:{height:w?"100%":"calc(100% - 32px)"},className:"relative md:ml-[2px] md:mr-[16px] md:my-[16px] md:rounded-[16px] bg-theme-bg-secondary w-full h-full overflow-y-scroll p-4 md:p-0",children:e.jsxs("div",{className:"flex flex-col w-full px-1 md:pl-6 md:pr-[86px] md:py-6 py-16",children:[e.jsxs("div",{className:"w-full flex flex-col gap-y-1 pb-6 border-white light:border-theme-sidebar-border border-b-2 border-opacity-10",children:[e.jsx("div",{className:"items-center",children:e.jsx("p",{className:"text-lg leading-6 font-bold text-theme-text-primary",children:"Your AnythingLLM Community Hub Account"})}),e.jsxs("p",{className:"text-xs leading-[18px] font-base text-theme-text-secondary",children:["Connecting your AnythingLLM Community Hub account allows you to access your ",e.jsx("b",{children:"private"})," AnythingLLM Community Hub items as well as upload your own items to the AnythingLLM Community Hub."]})]}),!i&&e.jsx("div",{className:"border border-theme-border my-2 flex flex-col md:flex-row md:items-center gap-x-2 text-theme-text-primary mb-4 bg-theme-settings-input-bg w-1/2 rounded-lg px-4 py-2",children:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsxs("div",{className:"gap-x-2 flex items-center",children:[e.jsx(N,{size:25}),e.jsx("h1",{className:"text-lg font-semibold",children:"Why connect my AnythingLLM Community Hub account?"})]}),e.jsxs("p",{className:"text-sm text-theme-text-secondary",children:["Connecting your AnythingLLM Community Hub account allows you to pull in your ",e.jsx("b",{children:"private"})," items from the AnythingLLM Community Hub as well as upload your own items to the AnythingLLM Community Hub.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("i",{children:"You do not need to connect your AnythingLLM Community Hub account to pull in public items from the AnythingLLM Community Hub."})]})]})}),e.jsx("div",{className:"mt-6 mb-12",children:e.jsxs("div",{className:"flex flex-col w-full max-w-[400px]",children:[e.jsx("label",{className:"text-theme-text-primary text-sm font-semibold block mb-2",children:"AnythingLLM Hub API Key"}),e.jsx("input",{type:"password",value:i||"",onChange:n,className:"border-none bg-theme-settings-input-bg text-theme-text-primary placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Enter your AnythingLLM Hub API key"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("p",{className:"text-theme-text-secondary text-xs",children:["You can get your API key from your"," ",e.jsx("a",{href:g.communityHub.profile(),className:"underline text-primary-button",children:"AnythingLLM Community Hub profile page"}),"."]}),!!a&&e.jsx("button",{onClick:t,className:"border-none text-red-500 hover:text-red-600 text-sm font-medium transition-colors duration-200",children:"Disconnect"})]})]})}),!!a&&e.jsx("div",{className:"mt-6",children:e.jsx(M,{connectionKey:a})})]})})]})}export{z as default};
