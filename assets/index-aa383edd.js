import{R as r,r as n,g as k,j as e,I as C,h as M,W as S,k as V,i as E,M as I}from"../index.js";import{S as A}from"./index-af9073a4.js";import{S as Z}from"./index-44bf2282.js";/* empty css                 */import{A as f}from"./admin-40631925.js";import{t as H}from"./index-b542d8eb.js";import{C as L}from"./index-07eec889.js";import"./Globe-1f44e45d.js";import"./index-0f62630d.js";import"./CaretRight-731d83f5.js";const O=new Map([["bold",r.createElement(r.Fragment,null,r.createElement("path",{d:"M224,44H32A12,12,0,0,0,20,56V192a20,20,0,0,0,20,20H216a20,20,0,0,0,20-20V56A12,12,0,0,0,224,44ZM193.15,68,128,127.72,62.85,68ZM44,188V83.28l75.89,69.57a12,12,0,0,0,16.22,0L212,83.28V188Z"}))],["duotone",r.createElement(r.Fragment,null,r.createElement("path",{d:"M224,56l-96,88L32,56Z",opacity:"0.2"}),r.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM203.43,64,128,133.15,52.57,64ZM216,192H40V74.19l82.59,75.71a8,8,0,0,0,10.82,0L216,74.19V192Z"}))],["fill",r.createElement(r.Fragment,null,r.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-8,144H40V74.19l82.59,75.71a8,8,0,0,0,10.82,0L216,74.19V192Z"}))],["light",r.createElement(r.Fragment,null,r.createElement("path",{d:"M224,50H32a6,6,0,0,0-6,6V192a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A6,6,0,0,0,224,50ZM208.58,62,128,135.86,47.42,62ZM216,194H40a2,2,0,0,1-2-2V69.64l86,78.78a6,6,0,0,0,8.1,0L218,69.64V192A2,2,0,0,1,216,194Z"}))],["regular",r.createElement(r.Fragment,null,r.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM203.43,64,128,133.15,52.57,64ZM216,192H40V74.19l82.59,75.71a8,8,0,0,0,10.82,0L216,74.19V192Z"}))],["thin",r.createElement(r.Fragment,null,r.createElement("path",{d:"M224,52H32a4,4,0,0,0-4,4V192a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A4,4,0,0,0,224,52Zm-10.28,8L128,138.57,42.28,60ZM216,196H40a4,4,0,0,1-4-4V65.09L125.3,147a4,4,0,0,0,5.4,0L220,65.09V192A4,4,0,0,1,216,196Z"}))]]);var F=Object.defineProperty,W=Object.defineProperties,$=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,w=(a,t,s)=>t in a?F(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,T=(a,t)=>{for(var s in t||(t={}))B.call(t,s)&&w(a,s,t[s]);if(g)for(var s of g(t))P.call(t,s)&&w(a,s,t[s]);return a},R=(a,t)=>W(a,$(t));const y=n.forwardRef((a,t)=>r.createElement(k,R(T({ref:t},a),{weights:O})));y.displayName="EnvelopeSimple";function z(){var a;return window!=null&&window.matchMedia?!!((a=window==null?void 0:window.matchMedia("(prefers-color-scheme: dark)"))!=null&&a.matches):!1}function D({invite:a}){var p,c;const t=n.useRef(null),[s,d]=n.useState(a.status),[i,o]=n.useState(!1),u=async()=>{if(!window.confirm(`Are you sure you want to deactivate this invite?
After you do this it will not longer be useable.

This action is irreversible.`))return!1;t!=null&&t.current&&(t.current.children[0].innerText="Disabled"),d("disabled"),await f.disableInvite(a.id)},x=()=>{if(!a)return!1;window.navigator.clipboard.writeText(`${window.location.origin}/accept-invite/${a.code}`),o(!0)};return n.useEffect(()=>{function h(){if(!i)return!1;setTimeout(()=>{o(!1)},3e3)}h()},[i]),e.jsx(e.Fragment,{children:e.jsxs("tr",{ref:t,className:"bg-transparent text-white text-opacity-80 text-sm font-medium",children:[e.jsx("td",{scope:"row",className:"px-6 py-4 whitespace-nowrap",children:H(s)}),e.jsx("td",{className:"px-6 py-4",children:a.claimedBy?((p=a.claimedBy)==null?void 0:p.username)||"deleted user":"--"}),e.jsx("td",{className:"px-6 py-4",children:((c=a.createdBy)==null?void 0:c.username)||"deleted user"}),e.jsx("td",{className:"px-6 py-4",children:a.createdAt}),e.jsx("td",{className:"px-6 py-4 flex items-center gap-x-6",children:s==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,disabled:i,className:"border-none font-medium text-blue-300 rounded-lg hover:text-blue-400 hover:underline",children:i?"Copied":"Copy Invite Link"}),e.jsx("td",{className:"px-6 py-4 flex items-center gap-x-6",children:e.jsx("button",{onClick:u,className:"border-none font-medium text-theme-text-primary hover:text-red-500 px-2 py-1 rounded-lg",children:e.jsx(C,{className:"h-5 w-5"})})})]})})]})})}function Y({closeModal:a}){const[t,s]=n.useState(null),[d,i]=n.useState(null),[o,u]=n.useState(!1),[x,p]=n.useState([]),[c,h]=n.useState([]),v=async l=>{i(null),l.preventDefault();const{invite:m,error:b}=await f.newInvite({role:null,workspaceIds:c});m&&s(m),i(b)},j=()=>{if(!t)return!1;window.navigator.clipboard.writeText(`${window.location.origin}/accept-invite/${t.code}`),u(!0)},N=l=>{if(c.includes(l)){const m=c.filter(b=>b!==l);h(m);return}h([...c,l])};return n.useEffect(()=>{function l(){if(!o)return!1;setTimeout(()=>{u(!1)},3e3)}l()},[o]),n.useEffect(()=>{async function l(){S.all().then(m=>p(m)).catch(()=>p([]))}l()},[]),e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-full max-w-2xl bg-theme-bg-secondary rounded-lg shadow border-2 border-theme-modal-border",children:[e.jsxs("div",{className:"relative p-6 border-b rounded-t border-theme-modal-border",children:[e.jsx("div",{className:"w-full flex gap-x-2 items-center",children:e.jsx("h3",{className:"text-xl font-semibold text-white overflow-hidden overflow-ellipsis whitespace-nowrap",children:"Create new invite"})}),e.jsx("button",{onClick:a,type:"button",className:"absolute top-4 right-4 transition-all duration-300 bg-transparent rounded-lg text-sm p-1 inline-flex items-center hover:bg-theme-modal-border hover:border-theme-modal-border hover:border-opacity-50 border-transparent border",children:e.jsx(M,{size:24,weight:"bold",className:"text-white"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"space-y-4",children:[d&&e.jsxs("p",{className:"text-red-400 text-sm",children:["Error: ",d]}),t&&e.jsx("input",{type:"url",defaultValue:`${window.location.origin}/accept-invite/${t.code}`,disabled:!0,className:"border-none bg-theme-settings-input-bg w-full text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5"}),e.jsxs("p",{className:"text-white text-opacity-60 text-xs md:text-sm",children:["After creation you will be able to copy the invite and send it to a new user where they can create an account as the"," ",e.jsx("b",{children:"default"})," role and automatically be added to workspaces selected."]})]}),x.length>0&&!t&&e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-col gap-y-1 mb-2",children:[e.jsx("label",{htmlFor:"workspaces",className:"block text-sm font-medium text-white",children:"Auto-add invitee to workspaces"}),e.jsx("p",{className:"text-white text-opacity-60 text-xs",children:"You can optionally automatically assign the user to the workspaces below by selecting them. By default, the user will not have any workspaces visible. You can assign workspaces later post-invite acceptance."})]}),e.jsx("div",{className:"flex flex-col gap-y-2 mt-2",children:x.map(l=>e.jsx(_,{workspace:l,selected:c.includes(l.id),toggleSelection:N},l.id))})]})}),e.jsx("div",{className:"flex justify-between items-center mt-6 pt-6 border-t border-theme-modal-border",children:t?e.jsx("button",{onClick:j,type:"button",disabled:o,className:"w-full transition-all duration-300 bg-white text-black hover:opacity-60 px-4 py-2 rounded-lg text-sm",children:o?"Copied Link":"Copy Invite Link"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:a,type:"button",className:"transition-all duration-300 text-white hover:bg-zinc-700 px-4 py-2 rounded-lg text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"transition-all duration-300 bg-white text-black hover:opacity-60 px-4 py-2 rounded-lg text-sm",children:"Create Invite"})]})})]})})]})})}function _({workspace:a,selected:t,toggleSelection:s}){return e.jsxs("button",{type:"button",onClick:()=>s(a.id),className:`transition-all duration-300 w-full h-11 p-2.5 rounded-lg flex justify-start items-center gap-2.5 cursor-pointer border ${t?"border-theme-sidebar-item-workspace-active bg-theme-bg-secondary":"border-theme-sidebar-border"} hover:border-theme-sidebar-border hover:bg-theme-bg-secondary`,children:[e.jsx("input",{type:"radio",name:"workspace",value:a.id,checked:t,className:"hidden"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-theme-sidebar-border mr-2 ${t?"bg-[var(--theme-sidebar-item-workspace-active)]":""}`}),e.jsx("div",{className:"text-theme-text-primary text-sm font-medium font-['Plus Jakarta Sans'] leading-tight",children:a.name})]})}function re(){const{isOpen:a,openModal:t,closeModal:s}=V();return e.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-theme-bg-container flex",children:[e.jsx(A,{}),e.jsxs("div",{style:{height:E?"100%":"calc(100% - 32px)"},className:"relative md:ml-[2px] md:mr-[16px] md:my-[16px] md:rounded-[16px] bg-theme-bg-secondary w-full h-full overflow-y-scroll p-4 md:p-0",children:[e.jsxs("div",{className:"flex flex-col w-full px-1 md:pl-6 md:pr-[50px] md:py-6 py-16",children:[e.jsxs("div",{className:"w-full flex flex-col gap-y-1 pb-6 border-white/10 border-b-2",children:[e.jsx("div",{className:"items-center flex gap-x-4",children:e.jsx("p",{className:"text-lg leading-6 font-bold text-theme-text-primary",children:"Invitations"})}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-theme-text-secondary mt-2",children:"Create invitation links for people in your organization to accept and sign up with. Invitations can only be used by a single user."})]}),e.jsx("div",{className:"w-full justify-end flex",children:e.jsxs(L,{onClick:t,className:"mt-3 mr-0 mb-4 md:-mb-12 z-10",children:[e.jsx(y,{className:"h-4 w-4",weight:"bold"})," Create Invite Link"]})}),e.jsx("div",{className:"overflow-x-auto mt-6",children:e.jsx(J,{})})]}),e.jsx(I,{isOpen:a,children:e.jsx(Y,{closeModal:s})})]})]})}function J(){z();const[a,t]=n.useState(!0),[s,d]=n.useState([]);return n.useEffect(()=>{async function i(){const o=await f.invites();d(o),t(!1)}i()},[]),a?e.jsx(Z,{height:"80vh",width:"100%",highlightColor:"var(--theme-bg-primary)",baseColor:"var(--theme-bg-secondary)",count:1,className:"w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm",containerClassName:"flex w-full"}):e.jsxs("table",{className:"w-full text-sm text-left rounded-lg min-w-[640px] border-spacing-0",children:[e.jsx("thead",{className:"text-theme-text-secondary text-xs leading-[18px] font-bold uppercase border-white/10 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 rounded-tl-lg",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Accepted By"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Created By"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Created"}),e.jsx("th",{scope:"col",className:"px-6 py-3 rounded-tr-lg",children:" "})]})}),e.jsx("tbody",{children:s.map(i=>e.jsx(D,{invite:i},i.id))})]})}export{re as default};
