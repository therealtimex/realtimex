import{r as a,b as g,j as e,i as x,G as v,s as m}from"../index.js";import{S as N}from"./index-af9073a4.js";import{C as j}from"./index-07eec889.js";import{A as d}from"./admin-40631925.js";import{n as w}from"./numbers-3998afe1.js";import"./Globe-1f44e45d.js";import"./index-0f62630d.js";import"./CaretRight-731d83f5.js";function i(t){return t===null?!0:isNaN(t)}function q(){const[t,u]=a.useState({}),[p,h]=a.useState(!0),[f,n]=a.useState(!1),[b,c]=a.useState(!1),{t:s}=g(),_=async r=>{r.preventDefault();const l=new FormData(r.target);if(Number(l.get("text_splitter_chunk_overlap"))>=Number(l.get("text_splitter_chunk_size"))){m("Chunk overlap cannot be larger or equal to chunk size.","error");return}n(!0),await d.updateSystemPreferences({text_splitter_chunk_size:i(l.get("text_splitter_chunk_size"))?1e3:Number(l.get("text_splitter_chunk_size")),text_splitter_chunk_overlap:i(l.get("text_splitter_chunk_overlap"))?1e3:Number(l.get("text_splitter_chunk_overlap"))}),n(!1),c(!1),m("Text chunking strategy settings saved.","success")};return a.useEffect(()=>{async function r(){var o;const l=(o=await d.systemPreferences())==null?void 0:o.settings;u(l!=null?l:{}),h(!1)}r()},[]),e.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-theme-bg-container flex",children:[e.jsx(N,{}),p?e.jsx("div",{style:{height:x?"100%":"calc(100% - 32px)"},className:"relative md:ml-[2px] md:mr-[16px] md:my-[16px] md:rounded-[16px] bg-theme-bg-secondary w-full h-full overflow-y-scroll p-4 md:p-0",children:e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx(v,{})})}):e.jsx("div",{style:{height:x?"100%":"calc(100% - 32px)"},className:"relative md:ml-[2px] md:mr-[16px] md:my-[16px] md:rounded-[16px] bg-theme-bg-secondary w-full h-full overflow-y-scroll p-4 md:p-0",children:e.jsx("form",{onSubmit:_,onChange:()=>c(!0),className:"flex w-full",children:e.jsxs("div",{className:"flex flex-col w-full px-1 md:pl-6 md:pr-[50px] md:py-6 py-16",children:[e.jsxs("div",{className:"w-full flex flex-col gap-y-1 pb-4 border-white light:border-theme-sidebar-border border-b-2 border-opacity-10",children:[e.jsx("div",{className:"flex gap-x-4 items-center",children:e.jsx("p",{className:"text-lg leading-6 font-bold text-white",children:s("text.title")})}),e.jsxs("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60",children:[s("text.desc-start")," ",e.jsx("br",{}),s("text.desc-end")]}),e.jsxs("p",{className:"text-xs leading-[18px] font-semibold text-white/80",children:[s("text.warn-start")," ",e.jsx("i",{children:s("text.warn-center")}),s("text.warn-end")]})]}),e.jsx("div",{className:"w-full justify-end flex",children:b&&e.jsx(j,{className:"mt-3 mr-0 -mb-14 z-10",children:s(f?"common.saving":"common.save")})}),e.jsx("div",{className:"flex flex-col gap-y-4 mt-8",children:e.jsxs("div",{className:"flex flex-col max-w-[300px]",children:[e.jsxs("div",{className:"flex flex-col gap-y-2 mb-4",children:[e.jsx("label",{className:"text-white text-sm font-semibold block",children:s("text.size.title")}),e.jsx("p",{className:"text-xs text-white/60",children:s("text.size.description")})]}),e.jsx("input",{type:"number",name:"text_splitter_chunk_size",min:1,max:(t==null?void 0:t.max_embed_chunk_size)||1e3,onWheel:r=>{var l;return(l=r==null?void 0:r.currentTarget)==null?void 0:l.blur()},className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"maximum length of vectorized text",defaultValue:i(t==null?void 0:t.text_splitter_chunk_size)?1e3:Number(t==null?void 0:t.text_splitter_chunk_size),required:!0,autoComplete:"off"}),e.jsxs("p",{className:"text-xs text-white/40 mt-2",children:[s("text.size.recommend")," ",w((t==null?void 0:t.max_embed_chunk_size)||1e3),"."]})]})}),e.jsx("div",{className:"flex flex-col gap-y-4 mt-8",children:e.jsxs("div",{className:"flex flex-col max-w-[300px]",children:[e.jsxs("div",{className:"flex flex-col gap-y-2 mb-4",children:[e.jsx("label",{className:"text-white text-sm font-semibold block",children:s("text.overlap.title")}),e.jsx("p",{className:"text-xs text-white/60",children:s("text.overlap.description")})]}),e.jsx("input",{type:"number",name:"text_splitter_chunk_overlap",min:0,onWheel:r=>{var l;return(l=r==null?void 0:r.currentTarget)==null?void 0:l.blur()},className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"maximum length of vectorized text",defaultValue:i(t==null?void 0:t.text_splitter_chunk_overlap)?20:Number(t==null?void 0:t.text_splitter_chunk_overlap),required:!0,autoComplete:"off"})]})})]})})})]})}export{q as default};
