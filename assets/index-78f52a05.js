import{j as e,K as S,N as Q,r as n,l as y,D as N,G as M,S as w,b as q,Q as W,T as X,v as Z,k as J,i as B,w as ee,h as le,M as te,n as ae,O as oe,U as ne,V as se,X as ie,Y as re,Z as de,_ as ce,$ as me,a0 as ue,a1 as xe,a2 as pe,s as D}from"../index.js";import{S as he}from"./index-af9073a4.js";import{C as fe}from"./index-488638a6.js";import{I as be}from"./Warning-8bf71f60.js";import{D as ge}from"./CaretUpDown-676a7767.js";import{C as we}from"./index-07eec889.js";import"./Globe-1f44e45d.js";import"./index-0f62630d.js";import"./CaretRight-731d83f5.js";function je({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-4",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Key"}),e.jsx("input",{type:"password",name:"OpenAiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"OpenAI API Key",defaultValue:l!=null&&l.OpenAiKey?"*".repeat(20):"",required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Model Preference"}),e.jsx("select",{name:"EmbeddingModelPref",required:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:e.jsx("optgroup",{label:"Available embedding models",children:["text-embedding-ada-002","text-embedding-3-small","text-embedding-3-large"].map(t=>e.jsx("option",{value:t,selected:(l==null?void 0:l.EmbeddingModelPref)===t,children:t},t))})})]})]})})}function ve({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-4",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Azure Service Endpoint"}),e.jsx("input",{type:"url",name:"AzureOpenAiEndpoint",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"https://my-azure.openai.azure.com",defaultValue:l==null?void 0:l.AzureOpenAiEndpoint,required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Key"}),e.jsx("input",{type:"password",name:"AzureOpenAiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Azure OpenAI API Key",defaultValue:l!=null&&l.AzureOpenAiKey?"*".repeat(20):"",required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Embedding Deployment Name"}),e.jsx("input",{type:"text",name:"AzureOpenAiEmbeddingModelPref",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Azure OpenAI embedding model deployment name",defaultValue:l==null?void 0:l.AzureOpenAiEmbeddingModelPref,required:!0,autoComplete:"off",spellCheck:!1})]})]})})}function ye({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-4",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Key"}),e.jsx("input",{type:"password",name:"GeminiEmbeddingApiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Gemini API Key",defaultValue:l!=null&&l.GeminiEmbeddingApiKey?"*".repeat(20):"",required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Model Preference"}),e.jsx("select",{name:"EmbeddingModelPref",required:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:e.jsx("optgroup",{label:"Available embedding models",children:["text-embedding-004"].map(t=>e.jsx("option",{value:t,selected:(l==null?void 0:l.EmbeddingModelPref)===t,children:t},t))})})]})]})})}function Ne({settings:l}){const{autoDetecting:t,basePath:a,basePathValue:o,showAdvancedControls:s,setShowAdvancedControls:c,handleAutoDetectClick:i}=S({provider:"localai",initialBasePath:l==null?void 0:l.EmbeddingBasePath,ENDPOINTS:Q}),[r,m]=n.useState(l==null?void 0:l.LocalAiApiKey),[p,x]=n.useState(l==null?void 0:l.LocalAiApiKey);return e.jsxs("div",{className:"w-full flex flex-col gap-y-7",children:[e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsx(Me,{settings:l,apiKey:p,basePath:a.value}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-2",children:"Max embedding chunk length"}),e.jsx("input",{type:"number",name:"EmbeddingModelMaxChunkLength",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"1000",min:1,onScroll:h=>h.target.blur(),defaultValue:l==null?void 0:l.EmbeddingModelMaxChunkLength,required:!1,autoComplete:"off"})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("div",{className:"flex flex-col gap-y-1 mb-2",children:e.jsxs("label",{className:"text-white text-sm font-semibold flex items-center gap-x-2",children:["Local AI API Key"," ",e.jsx("p",{className:"!text-xs !italic !font-thin",children:"optional"})]})}),e.jsx("input",{type:"password",name:"LocalAiApiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"sk-mysecretkey",defaultValue:l!=null&&l.LocalAiApiKey?"*".repeat(20):"",autoComplete:"off",spellCheck:!1,onChange:h=>m(h.target.value),onBlur:()=>x(r)})]})]}),e.jsx("div",{className:"flex justify-start mt-4",children:e.jsxs("button",{onClick:h=>{h.preventDefault(),c(!s)},className:"border-none text-theme-text-primary hover:text-theme-text-secondary flex items-center text-sm",children:[s?"Hide":"Show"," advanced settings",s?e.jsx(y,{size:14,className:"ml-1"}):e.jsx(N,{size:14,className:"ml-1"})]})}),e.jsx("div",{hidden:!s,children:e.jsx("div",{className:"w-full flex items-center gap-4",children:e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-white text-sm font-semibold",children:"LocalAI Base URL"}),t?e.jsx(M,{size:"6"}):e.jsx(e.Fragment,{children:!o.value&&e.jsx("button",{onClick:i,className:"bg-primary-button text-xs font-medium px-2 py-1 rounded-lg hover:bg-secondary hover:text-white shadow-[0_4px_14px_rgba(0,0,0,0.25)]",children:"Auto-Detect"})})]}),e.jsx("input",{type:"url",name:"EmbeddingBasePath",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"http://localhost:8080/v1",value:o.value,required:!0,autoComplete:"off",spellCheck:!1,onChange:a.onChange,onBlur:a.onBlur})]})})})]})}function Me({settings:l,apiKey:t=null,basePath:a=null}){const[o,s]=n.useState([]),[c,i]=n.useState(!0);return n.useEffect(()=>{async function r(){if(!a||!a.includes("/v1")){s([]),i(!1);return}i(!0);const{models:m}=await w.customModels("localai",typeof t=="boolean"?null:t,a);s(m||[]),i(!1)}r()},[a,t]),c||o.length==0?e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-2",children:"Embedding Model Name"}),e.jsx("select",{name:"EmbeddingModelPref",disabled:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:e.jsx("option",{disabled:!0,selected:!0,children:a!=null&&a.includes("/v1")?"-- loading available models --":"-- waiting for URL --"})})]}):e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-2",children:"Embedding Model Name"}),e.jsx("select",{name:"EmbeddingModelPref",required:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:o.length>0&&e.jsx("optgroup",{label:"Your loaded models",children:o.map(r=>e.jsx("option",{value:r.id,selected:(l==null?void 0:l.EmbeddingModelPref)===r.id,children:r.id},r.id))})})]})}function ke(){const{t:l}=q();return e.jsx("div",{className:"w-full h-10 items-center flex",children:e.jsx("p",{className:"text-sm font-base text-white text-opacity-60",children:l("embedding.provider.description")})})}function Ce({settings:l}){const{autoDetecting:t,basePath:a,basePathValue:o,showAdvancedControls:s,setShowAdvancedControls:c,handleAutoDetectClick:i}=S({provider:"ollama",initialBasePath:l==null?void 0:l.EmbeddingBasePath,ENDPOINTS:W}),[r,m]=n.useState((l==null?void 0:l.EmbeddingModelMaxChunkLength)||8192),p=x=>{m(Number(x.target.value))};return e.jsxs("div",{className:"w-full flex flex-col gap-y-7",children:[e.jsxs("div",{className:"w-full flex items-start gap-[36px] mt-1.5",children:[e.jsx(Ae,{settings:l,basePath:a.value}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-2",children:"Max Embedding Chunk Length"}),e.jsx("input",{type:"number",name:"EmbeddingModelMaxChunkLength",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"8192",min:1,value:r,onChange:p,onScroll:x=>x.target.blur(),required:!0,autoComplete:"off"}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60 mt-2",children:"Maximum length of text chunks for embedding."})]})]}),e.jsx("div",{className:"flex justify-start mt-4",children:e.jsxs("button",{onClick:x=>{x.preventDefault(),c(!s)},className:"border-none text-theme-text-primary hover:text-theme-text-secondary flex items-center text-sm",children:[s?"Hide":"Show"," Manual Endpoint Input",s?e.jsx(y,{size:14,className:"ml-1"}):e.jsx(N,{size:14,className:"ml-1"})]})}),e.jsx("div",{hidden:!s,children:e.jsx("div",{className:"w-full flex items-start gap-4",children:e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-white text-sm font-semibold",children:"Ollama Base URL"}),t?e.jsx(M,{size:"6"}):e.jsx(e.Fragment,{children:!o.value&&e.jsx("button",{onClick:i,className:"bg-primary-button text-xs font-medium px-2 py-1 rounded-lg hover:bg-secondary hover:text-white shadow-[0_4px_14px_rgba(0,0,0,0.25)]",children:"Auto-Detect"})})]}),e.jsx("input",{type:"url",name:"EmbeddingBasePath",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"http://127.0.0.1:11434",value:o.value,required:!0,autoComplete:"off",spellCheck:!1,onChange:a.onChange,onBlur:a.onBlur}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60 mt-2",children:"Enter the URL where Ollama is running."})]})})})]})}function Ae({settings:l,basePath:t=null}){const[a,o]=n.useState([]),[s,c]=n.useState(!0);return n.useEffect(()=>{async function i(){if(!t){o([]),c(!1);return}c(!0);try{const{models:r}=await w.customModels("ollama",null,t);o(r||[])}catch(r){console.error("Failed to fetch custom models:",r),o([])}c(!1)}i()},[t]),s||a.length==0?e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-2",children:"Ollama Embedding Model"}),e.jsx("select",{name:"EmbeddingModelPref",disabled:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:e.jsx("option",{disabled:!0,selected:!0,children:t?"--loading available models--":"Enter Ollama URL first"})}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60 mt-2",children:"Select the Ollama model for embeddings. Models will load after entering a valid Ollama URL."})]}):e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-2",children:"Ollama Embedding Model"}),e.jsx("select",{name:"EmbeddingModelPref",required:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:a.length>0&&e.jsx("optgroup",{label:"Your loaded models",children:a.map(i=>e.jsx("option",{value:i.id,selected:l.EmbeddingModelPref===i.id,children:i.id},i.id))})}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60 mt-2",children:"Choose the Ollama model you want to use for generating embeddings."})]})}function Le({settings:l}){const{autoDetecting:t,basePath:a,basePathValue:o,showAdvancedControls:s,setShowAdvancedControls:c,handleAutoDetectClick:i}=S({provider:"lmstudio",initialBasePath:l==null?void 0:l.EmbeddingBasePath,ENDPOINTS:X}),[r,m]=n.useState((l==null?void 0:l.EmbeddingModelMaxChunkLength)||8192),p=x=>{m(Number(x.target.value))};return e.jsxs("div",{className:"w-full flex flex-col gap-y-7",children:[e.jsxs("div",{className:"w-full flex items-start gap-[36px] mt-1.5",children:[e.jsx(Ee,{settings:l,basePath:a.value}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-2",children:"Max Embedding Chunk Length"}),e.jsx("input",{type:"number",name:"EmbeddingModelMaxChunkLength",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"8192",min:1,value:r,onChange:p,onScroll:x=>x.target.blur(),required:!0,autoComplete:"off"}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60 mt-2",children:"Maximum length of text chunks for embedding."})]})]}),e.jsx("div",{className:"flex justify-start mt-4",children:e.jsxs("button",{onClick:x=>{x.preventDefault(),c(!s)},className:"border-none text-theme-text-primary hover:text-theme-text-secondary flex items-center text-sm",children:[s?"Hide":"Show"," Manual Endpoint Input",s?e.jsx(y,{size:14,className:"ml-1"}):e.jsx(N,{size:14,className:"ml-1"})]})}),e.jsx("div",{hidden:!s,children:e.jsx("div",{className:"w-full flex items-start gap-4",children:e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-white text-sm font-semibold",children:"LM Studio Base URL"}),t?e.jsx(M,{size:"6"}):e.jsx(e.Fragment,{children:!o.value&&e.jsx("button",{onClick:i,className:"bg-primary-button text-xs font-medium px-2 py-1 rounded-lg hover:bg-secondary hover:text-white shadow-[0_4px_14px_rgba(0,0,0,0.25)]",children:"Auto-Detect"})})]}),e.jsx("input",{type:"url",name:"EmbeddingBasePath",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"http://localhost:1234/v1",value:o.value,required:!0,autoComplete:"off",spellCheck:!1,onChange:a.onChange,onBlur:a.onBlur}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60 mt-2",children:"Enter the URL where LM Studio is running."})]})})})]})}function Ee({settings:l,basePath:t=null}){const[a,o]=n.useState([]),[s,c]=n.useState(!0);return n.useEffect(()=>{async function i(){if(!t){o([]),c(!1);return}c(!0);try{const{models:r}=await w.customModels("lmstudio",null,t);o(r||[])}catch(r){console.error("Failed to fetch custom models:",r),o([])}c(!1)}i()},[t]),s||a.length==0?e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-2",children:"LM Studio Embedding Model"}),e.jsx("select",{name:"EmbeddingModelPref",disabled:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:e.jsx("option",{disabled:!0,selected:!0,children:t?"--loading available models--":"Enter LM Studio URL first"})}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60 mt-2",children:"Select the LM Studio model for embeddings. Models will load after entering a valid LM Studio URL."})]}):e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-2",children:"LM Studio Embedding Model"}),e.jsx("select",{name:"EmbeddingModelPref",required:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:a.length>0&&e.jsx("optgroup",{label:"Your loaded models",children:a.map(i=>e.jsx("option",{value:i.id,selected:l.EmbeddingModelPref===i.id,children:i.id},i.id))})}),e.jsx("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60 mt-2",children:"Choose the LM Studio model you want to use for generating embeddings."})]})}function Se({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-4",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Key"}),e.jsx("input",{type:"password",name:"CohereApiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Cohere API Key",defaultValue:l!=null&&l.CohereApiKey?"*".repeat(20):"",required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Model Preference"}),e.jsx("select",{name:"EmbeddingModelPref",required:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:e.jsx("optgroup",{label:"Available embedding models",children:["embed-english-v3.0","embed-multilingual-v3.0","embed-english-light-v3.0","embed-multilingual-light-v3.0","embed-english-v2.0","embed-english-light-v2.0","embed-multilingual-v2.0"].map(t=>e.jsx("option",{value:t,selected:(l==null?void 0:l.EmbeddingModelPref)===t,children:t},t))})})]})]})})}function Oe({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-4",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Key"}),e.jsx("input",{type:"password",name:"VoyageAiApiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Voyage AI API Key",defaultValue:l!=null&&l.VoyageAiApiKey?"*".repeat(20):"",required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Model Preference"}),e.jsx("select",{name:"EmbeddingModelPref",required:!0,defaultValue:l==null?void 0:l.EmbeddingModelPref,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:e.jsx("optgroup",{label:"Available embedding models",children:["voyage-large-2-instruct","voyage-finance-2","voyage-multilingual-2","voyage-law-2","voyage-code-2","voyage-large-2","voyage-2","voyage-3","voyage-3-lite","voyage-3-large","voyage-code-3"].map(t=>e.jsx("option",{value:t,children:t},t))})})]})]})})}function Pe({settings:l}){const[t,a]=n.useState(l==null?void 0:l.LiteLLMBasePath),[o,s]=n.useState(l==null?void 0:l.LiteLLMBasePath),[c,i]=n.useState(l==null?void 0:l.LiteLLMAPIKey),[r,m]=n.useState(l==null?void 0:l.LiteLLMAPIKey);return e.jsxs("div",{className:"w-full flex flex-col gap-y-7",children:[e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Base URL"}),e.jsx("input",{type:"url",name:"LiteLLMBasePath",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"http://127.0.0.1:4000",defaultValue:l==null?void 0:l.LiteLLMBasePath,required:!0,autoComplete:"off",spellCheck:!1,onChange:p=>a(p.target.value),onBlur:()=>s(t)})]}),e.jsx(Ie,{settings:l,basePath:o,apiKey:r}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Max embedding chunk length"}),e.jsx("input",{type:"number",name:"EmbeddingModelMaxChunkLength",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"8192",min:1,onScroll:p=>p.target.blur(),defaultValue:l==null?void 0:l.EmbeddingModelMaxChunkLength,required:!1,autoComplete:"off"})]})]}),e.jsx("div",{className:"w-full flex items-center gap-[36px]",children:e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("div",{className:"flex flex-col gap-y-1 mb-4",children:e.jsxs("label",{className:"text-white text-sm font-semibold flex items-center gap-x-2",children:["API Key ",e.jsx("p",{className:"!text-xs !italic !font-thin",children:"optional"})]})}),e.jsx("input",{type:"password",name:"LiteLLMAPIKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"sk-mysecretkey",defaultValue:l!=null&&l.LiteLLMAPIKey?"*".repeat(20):"",autoComplete:"off",spellCheck:!1,onChange:p=>i(p.target.value),onBlur:()=>m(c)})]})})]})}function Ie({settings:l,basePath:t=null,apiKey:a=null}){const[o,s]=n.useState([]),[c,i]=n.useState(!0);return n.useEffect(()=>{async function r(){if(!t){s([]),i(!1);return}i(!0);const{models:m}=await w.customModels("litellm",typeof a=="boolean"?null:a,t);s(m||[]),i(!1)}r()},[t,a]),c||o.length==0?e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Embedding Model Selection"}),e.jsx("select",{name:"EmbeddingModelPref",disabled:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:e.jsx("option",{disabled:!0,selected:!0,children:t!=null&&t.includes("/v1")?"-- loading available models --":"-- waiting for URL --"})})]}):e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Embedding Model Selection"}),e.jsx(Ke,{})]}),e.jsx("select",{name:"EmbeddingModelPref",required:!0,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:o.length>0&&e.jsx("optgroup",{label:"Your loaded models",children:o.map(r=>e.jsx("option",{value:r.id,selected:l.EmbeddingModelPref===r.id,children:r.id},r.id))})})]})}function Ke(){return e.jsxs("div",{className:"flex items-center justify-center -mt-3 ml-1",children:[e.jsx(be,{size:14,className:"ml-1 text-orange-500 cursor-pointer","data-tooltip-id":"model-tooltip","data-tooltip-place":"right"}),e.jsx(Z,{delayHide:300,id:"model-tooltip",className:"max-w-xs",clickable:!0,children:e.jsxs("p",{className:"text-sm",children:["Be sure to select a valid embedding model. Chat models are not embedding models. See"," ",e.jsx("a",{href:"https://litellm.vercel.app/docs/embedding/supported_embedding",target:"_blank",rel:"noreferrer",className:"underline",children:"this page"})," ","for more information."]})})]})}function Ve({settings:l}){const[t,a]=n.useState(!1);return e.jsxs("div",{className:"w-full flex flex-col gap-y-7",children:[e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Base URL"}),e.jsx("input",{type:"url",name:"EmbeddingBasePath",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"https://api.openai.com/v1",defaultValue:l==null?void 0:l.EmbeddingBasePath,required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Embedding Model"}),e.jsx("input",{type:"text",name:"EmbeddingModelPref",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"text-embedding-ada-002",defaultValue:l==null?void 0:l.EmbeddingModelPref,required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Max embedding chunk length"}),e.jsx("input",{type:"number",name:"EmbeddingModelMaxChunkLength",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"8192",min:1,onScroll:o=>o.target.blur(),defaultValue:l==null?void 0:l.EmbeddingModelMaxChunkLength,required:!1,autoComplete:"off"})]})]}),e.jsx("div",{className:"w-full flex items-center gap-[36px]",children:e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("div",{className:"flex flex-col gap-y-1 mb-4",children:e.jsxs("label",{className:"text-white text-sm font-semibold flex items-center gap-x-2",children:["API Key ",e.jsx("p",{className:"!text-xs !italic !font-thin",children:"optional"})]})}),e.jsx("input",{type:"password",name:"GenericOpenAiEmbeddingApiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"sk-mysecretkey",defaultValue:l!=null&&l.GenericOpenAiEmbeddingApiKey?"*".repeat(20):"",autoComplete:"off",spellCheck:!1})]})}),e.jsx("div",{className:"flex justify-start mt-4",children:e.jsxs("button",{onClick:o=>{o.preventDefault(),a(!t)},className:"border-none text-theme-text-primary hover:text-theme-text-secondary flex items-center text-sm",children:[t?"Hide":"Show"," advanced settings",t?e.jsx(y,{size:14,className:"ml-1"}):e.jsx(N,{size:14,className:"ml-1"})]})}),e.jsx("div",{hidden:!t,children:e.jsx("div",{className:"w-full flex items-start gap-4",children:e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("div",{className:"flex flex-col gap-y-1 mb-4",children:e.jsxs("label",{className:"text-white text-sm font-semibold flex items-center gap-x-2",children:["Max concurrent Chunks",e.jsx("p",{className:"!text-xs !italic !font-thin",children:"optional"})]})}),e.jsx("input",{type:"number",name:"GenericOpenAiEmbeddingMaxConcurrentChunks",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"500",min:1,onScroll:o=>o.target.blur(),defaultValue:l==null?void 0:l.GenericOpenAiEmbeddingMaxConcurrentChunks,required:!1,autoComplete:"off",spellCheck:!1})]})})})]})}function ze({name:l,value:t,image:a,description:o,checked:s,onClick:c}){return e.jsxs("div",{onClick:()=>c(t),className:`w-full p-2 rounded-md hover:cursor-pointer hover:bg-theme-bg-secondary ${s?"bg-theme-bg-secondary":""}`,children:[e.jsx("input",{type:"checkbox",value:t,className:"peer hidden",checked:s,readOnly:!0,formNoValidate:!0}),e.jsxs("div",{className:"flex gap-x-4 items-center",children:[e.jsx("img",{src:a,alt:`${l} logo`,className:"w-10 h-10 rounded-md"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:l}),e.jsx("div",{className:"mt-1 text-xs text-description",children:o})]})]})]})}function Be({settings:l}){return e.jsx("div",{className:"w-full flex flex-col gap-y-4",children:e.jsxs("div",{className:"w-full flex items-center gap-[36px] mt-1.5",children:[e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"API Key"}),e.jsx("input",{type:"password",name:"MistralApiKey",className:"border-none bg-theme-settings-input-bg text-white placeholder:text-theme-settings-input-placeholder text-sm rounded-lg focus:outline-primary-button active:outline-primary-button outline-none block w-full p-2.5",placeholder:"Mistral AI API Key",defaultValue:l!=null&&l.MistralApiKey?"*".repeat(20):"",required:!0,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"flex flex-col w-60",children:[e.jsx("label",{className:"text-white text-sm font-semibold block mb-3",children:"Model Preference"}),e.jsx("select",{name:"EmbeddingModelPref",required:!0,defaultValue:l==null?void 0:l.EmbeddingModelPref,className:"border-none bg-theme-settings-input-bg border-gray-500 text-white text-sm rounded-lg block w-full p-2.5",children:e.jsx("optgroup",{label:"Available embedding models",children:["mistral-embed"].map(t=>e.jsx("option",{value:t,children:t},t))})})]})]})})}const E=[{name:"AnythingLLM Embedder",value:"native",logo:ae,options:l=>e.jsx(ke,{settings:l}),description:"Use the built-in embedding provider for AnythingLLM. Zero setup!"},{name:"OpenAI",value:"openai",logo:oe,options:l=>e.jsx(je,{settings:l}),description:"The standard option for most non-commercial use."},{name:"Azure OpenAI",value:"azure",logo:ne,options:l=>e.jsx(ve,{settings:l}),description:"The enterprise option of OpenAI hosted on Azure services."},{name:"Gemini",value:"gemini",logo:se,options:l=>e.jsx(ye,{settings:l}),description:"Run powerful embedding models from Google AI."},{name:"Local AI",value:"localai",logo:ie,options:l=>e.jsx(Ne,{settings:l}),description:"Run embedding models locally on your own machine."},{name:"Ollama",value:"ollama",logo:re,options:l=>e.jsx(Ce,{settings:l}),description:"Run embedding models locally on your own machine."},{name:"LM Studio",value:"lmstudio",logo:de,options:l=>e.jsx(Le,{settings:l}),description:"Discover, download, and run thousands of cutting edge LLMs in a few clicks."},{name:"Cohere",value:"cohere",logo:ce,options:l=>e.jsx(Se,{settings:l}),description:"Run powerful embedding models from Cohere."},{name:"Voyage AI",value:"voyageai",logo:me,options:l=>e.jsx(Oe,{settings:l}),description:"Run powerful embedding models from Voyage AI."},{name:"LiteLLM",value:"litellm",logo:ue,options:l=>e.jsx(Pe,{settings:l}),description:"Run powerful embedding models from LiteLLM."},{name:"Mistral AI",value:"mistral",logo:xe,options:l=>e.jsx(Be,{settings:l}),description:"Run powerful embedding models from Mistral AI."},{name:"Generic OpenAI",value:"generic-openai",logo:pe,options:l=>e.jsx(Ve,{settings:l}),description:"Run embedding models from any OpenAI compatible API service."}];function $e(){var V;const[l,t]=n.useState(!1),[a,o]=n.useState(!1),[s,c]=n.useState(!1),[i,r]=n.useState(!1),[m,p]=n.useState(null),[x,h]=n.useState(!0),[k,C]=n.useState(""),[R,U]=n.useState([]),[f,O]=n.useState(null),[A,j]=n.useState(!1),L=n.useRef(null),{isOpen:G,openModal:_,closeModal:P}=J(),{t:b}=q();function T(d){var u;try{const g=(u=new FormData(d).get("EmbeddingModelPref"))!=null?u:null;return g===null?!1:(m==null?void 0:m.EmbeddingModelPref)!==g}catch(g){console.error(g)}return!1}const I=async d=>{d.preventDefault(),(f!==(m==null?void 0:m.EmbeddingEngine)||T(d.target))&&a&&(s||i)?_():await K()},K=async()=>{t(!0);const d=document.getElementById("embedding-form"),u={},g=new FormData(d);u.EmbeddingEngine=f;for(var[$,Y]of g.entries())u[$]=Y;const{error:z}=await w.updateSystem(u);z?(D(`Failed to save embedding settings: ${z}`,"error"),o(!0)):(D("Embedding preferences saved successfully.","success"),o(!1)),t(!1),P()},F=d=>{C(""),O(d),j(!1),o(!0)},H=()=>{k.length>0?(C(""),L.current&&(L.current.value="")):j(!A)};n.useEffect(()=>{async function d(){const u=await w.keys();p(u),O((u==null?void 0:u.EmbeddingEngine)||"native"),c((u==null?void 0:u.HasExistingEmbeddings)||!1),r((u==null?void 0:u.HasCachedEmbeddings)||!1),h(!1)}d()},[]),n.useEffect(()=>{const d=E.filter(u=>u.name.toLowerCase().includes(k.toLowerCase()));U(d)},[k,f]);const v=E.find(d=>d.value===f);return e.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-theme-bg-container flex",children:[e.jsx(he,{}),x?e.jsx("div",{style:{height:B?"100%":"calc(100% - 32px)"},className:"relative md:ml-[2px] md:mr-[16px] md:my-[16px] md:rounded-[16px] bg-theme-bg-secondary w-full h-full overflow-y-scroll p-4 md:p-0",children:e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx(M,{})})}):e.jsx("div",{style:{height:B?"100%":"calc(100% - 32px)"},className:"relative md:ml-[2px] md:mr-[16px] md:my-[16px] md:rounded-[16px] bg-theme-bg-secondary w-full h-full overflow-y-scroll p-4 md:p-0",children:e.jsx("form",{id:"embedding-form",onSubmit:I,className:"flex w-full",children:e.jsxs("div",{className:"flex flex-col w-full px-1 md:pl-6 md:pr-[50px] py-16 md:py-6",children:[e.jsxs("div",{className:"w-full flex flex-col gap-y-1 pb-6 border-white light:border-theme-sidebar-border border-b-2 border-opacity-10",children:[e.jsx("div",{className:"flex gap-x-4 items-center",children:e.jsx("p",{className:"text-lg leading-6 font-bold text-white",children:b("embedding.title")})}),e.jsxs("p",{className:"text-xs leading-[18px] font-base text-white text-opacity-60",children:[b("embedding.desc-start"),e.jsx("br",{}),b("embedding.desc-end")]})]}),e.jsx("div",{className:"w-full justify-end flex",children:a&&e.jsx(we,{onClick:()=>I(),className:"mt-3 mr-0 -mb-14 z-10",children:b(l?"common.saving":"common.save")})}),e.jsx("div",{className:"text-base font-bold text-white mt-6 mb-4",children:b("embedding.provider.title")}),e.jsxs("div",{className:"relative",children:[A&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-70 backdrop-blur-sm z-10",onClick:()=>j(!1)}),A?e.jsx("div",{className:"absolute top-0 left-0 w-full max-w-[640px] max-h-[310px] overflow-auto white-scrollbar min-h-[64px] bg-theme-settings-input-bg rounded-lg flex flex-col justify-between cursor-pointer border-2 border-primary-button z-20",children:e.jsxs("div",{className:"w-full flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex items-center sticky top-0 border-b border-[#9CA3AF] mx-4 bg-theme-settings-input-bg",children:[e.jsx(ee,{size:20,weight:"bold",className:"absolute left-4 z-30 text-theme-text-primary -ml-4 my-2"}),e.jsx("input",{type:"text",name:"embedder-search",autoComplete:"off",placeholder:"Search all embedding providers",className:"border-none -ml-4 my-2 bg-transparent z-20 pl-12 h-[38px] w-full px-4 py-1 text-sm outline-none text-theme-text-primary placeholder:text-theme-text-primary placeholder:font-medium",onChange:d=>C(d.target.value),ref:L,onKeyDown:d=>{d.key==="Enter"&&d.preventDefault()}}),e.jsx(le,{size:20,weight:"bold",className:"cursor-pointer text-white hover:text-x-button",onClick:H})]}),e.jsx("div",{className:"flex-1 pl-4 pr-2 flex flex-col gap-y-1 overflow-y-auto white-scrollbar pb-4",children:R.map(d=>e.jsx(ze,{name:d.name,value:d.value,image:d.logo,description:d.description,checked:f===d.value,onClick:()=>F(d.value)},d.name))})]})}):e.jsxs("button",{className:"w-full max-w-[640px] h-[64px] bg-theme-settings-input-bg rounded-lg flex items-center p-[14px] justify-between cursor-pointer border-2 border-transparent hover:border-primary-button transition-all duration-300",type:"button",onClick:()=>j(!0),children:[e.jsxs("div",{className:"flex gap-x-4 items-center",children:[e.jsx("img",{src:v.logo,alt:`${v.name} logo`,className:"w-10 h-10 rounded-md"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:v.name}),e.jsx("div",{className:"mt-1 text-xs text-description",children:v.description})]})]}),e.jsx(ge,{size:24,weight:"bold",className:"text-white"})]})]}),e.jsx("div",{onChange:()=>o(!0),className:"mt-4 flex flex-col gap-y-1",children:f&&((V=E.find(d=>d.value===f))==null?void 0:V.options(m))})]})})}),e.jsx(te,{isOpen:G,children:e.jsx(fe,{warningText:"Switching the embedding model will reset all previously embedded documents in all workspaces.\\n\\nConfirming will clear all embeddings from your vector database and remove all documents from your workspaces. Your uploaded documents will not be deleted, they will be available for re-embedding.",onClose:P,onConfirm:K})})]})}export{$e as default};
